<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="Tw:@hope_brasil">
<meta name="description" content="Riscômetro de contágio para covid-19.">
<meta name="twitter:card" content="Quer saber se o ambiente é arriscado para contágio pelo covid-19?">
<meta name="twitter:creator" content="@hope_brasil">
<meta name="twitter:image: content="riscometroTwitter.jpg">
<title>Riscômetro de Covid</title>
<link rel="icon" type="image/png" sizes="32x32" href="faviconBig.png">
<link rel="icon" type="image/png" sizes="16x16" href="faviconSmall.png">
<link rel="stylesheet" href="gauge-other.css?v=GAUGE_VERSION">
<style>
body {
  font-family: "Roboto", sans-serif;

}
footer {
	text-align: center;
	padding: 3px;
	font-size: x-small;
}
</style>
</head>
<body>
<div class="main_body">
    <div class="column_1">
        <div><h1 align="center">Riscômetro</h1></div>
        <div id="riskGauge" class="gauge">
          <div class="gauge__body">
            <div class="gauge__cover"></div>
            <div class="gaugeNeedle"></div>
            <div class="gaugeNeedleCircle"></div>
          </div> 
        </div> <!--End gauge-->
    </div> <!--End "column_1-->
    <br />
    <br />
    <br />
    <div class="column_2">
    	<div class="row" name="row1">
        	<div class="ImageContainer"><img src="ambientePouco.gif" width="75" height="75" alt="Ar livre" />
            	<div class="imagelabel"> Aberto, arejado</div>
            </div>
            <div class="MainSliderContainer">
             	<label for="points"><div class="slidertitle">Ambiente</div></label><br />
                <div class="slidercontainer">
                <input  type="range" id="gaugeValue-riskGaugeA" class="slider" name="Ambiente" min="1" max="100" value="1" onInput="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT', 'riskGaugeE', 1, 100);" onChange="ThreeUpdateGauge('riskGaugeA','riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1,100);" />
         		</div> <!--End slidercontainer div-->             
            </div> <!--End MainSliderContainer div-->
          <div class="ImageContainer"><img src="ambienteMuito.gif" width="75" height="75" alt="Lugar Fechado" />
          	<div class="imagelabel"> Fechado</div>
          </div>
        </div> <!--End row1 -->
         <div class="row" name="row2">
        	<div class="ImageContainer"><img src="pessoasPouco.gif" width="75" height="75" alt="Pessoas distanciadas" />
            	<div class="imagelabel"> Distanciado</div>            
            </div>
            <div class="MainSliderContainer">
                <label for="points"><div class="slidertitle">Espaço entre pessoas</div></label><br />
                <div class="slidercontainer">
                <input type="range" id="gaugeValue-riskGaugeP" class="slider" name="Pessoas" min="1" max="100" value="1" onInput="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100);" onChange="ThreeUpdateGauge('riskGaugeA','riskGaugeP', 'riskGaugeT', 'riskGaugeE', 1, 100);" />
             	</div><!--End slidercontainer div-->
        	</div><!--End MainSliderContainer div-->
           <div class="ImageContainer"><img src="pessoasMuito.gif" width="75" height="75" alt="Muitas pessoas aglomeradas" />
            	<div class="imagelabel"> Aglomerado</div>
           </div>
        </div><!--End row2 -->
         <div class="row" name="row3">
        	<div class="ImageContainer"><img src="tempoPouxo.gif" width="75" height="75" alt="Pouco Tempo" />
            	<div class="imagelabel">Pouco</div>
            </div>
            <div class="MainSliderContainer">
				<label for="points"><div class="slidertitle">Tempo</div></label><br />  
                <div class="slidercontainer">
                <input type="range" id="gaugeValue-riskGaugeT" class="slider" name="Tempo" min="1" max="100" value="1" onInput="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT', 'riskGaugeE', 1, 100);" onChange="ThreeUpdateGauge('riskGaugeA','riskGaugeP', 'riskGaugeT', 'riskGaugeE', 1, 100);" />
				</div><!--End slidercontainer div-->  
            </div><!--End MainSliderContainer div-->
			<div class="ImageContainer"><img src="tempoMuito.gif" width="75" height="75" alt="Muito Tempo" />
            	<div class="imagelabel"> Muito</div>            
            </div>
        </div><!--End row3 -->
         <div class="row" name="row4">
        	<div class="ImageContainer"><img src="emissaoBaixo.gif" width="75" height="75" alt="Silenciosa" />
            	<div class="imagelabel"> Em silêncio</div>            
            </div>
            <div class="MainSliderContainer">
				<label for="points"><div class="slidertitle">Emissão</div></label><br />  
                <div class="slidercontainer">
                <input type="range" id="gaugeValue-riskGaugeE" class="slider" name="Emissao" min="1" max="100" value="1" onInput="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100);" onChange="ThreeUpdateGauge('riskGaugeA','riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100);" />
				</div><!--End slidercontainer div-->  
            </div><!--End MainSliderContainer div-->
			<div class="ImageContainer"><img src="emissao.gif"  width="75" height="75" alt="Falando alto" />
            	<div class="imagelabel"> Gritando, cantando</div>            
            </div>
        </div><!--End row4 -->
    </div> <!--End "column_2"-->
  <div id="MaskInfoContainer" align="center">
    	<div class="H2">Uso de máscaras</div>
        <div class="MaskBubble">
            <form action="/action_page.php">
            <div class="EachMaskBubble"><input type="radio" id="Nao" name="mask" checked="checked" onChange="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100)">
            <label for="Nao">&nbsp;Sem máscara</label>
            </div>                   	                     
            <div class="EachMaskBubble"><input type="radio" id="Sim" name="mask" onChange="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100)">
            <label for="Sim">&nbsp;Máscara de pano</label><br>
            </div>
            <div class="EachMaskBubble"><input type="radio" id="PFF2" name="mask" onChange="ThreeUpdateGauge('riskGaugeA', 'riskGaugeP', 'riskGaugeT',  'riskGaugeE', 1, 100)">
            <label for="PFF2">&nbsp;Máscara qualidade PFF2</label><br>
            </div>
			</form>
        </div> <!--End MaskBubble-->        
    </div><!--End MaskInfoContainer-->

<!--    <div id="testing"> Valor Teste</div>-->
</div> <!--End "main_body"-->
<footer>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>Riscômetro criado por <a href="https://twitter.com/hope_brasil" target="_new">@hope_brasil</a> baseado no estudo <a href="https://www.bmj.com/content/370/bmj.m3223" target="_new">Jones N R, Qureshi Z U, Temple R J, Larwood J P J, Greenhalgh T, Bourouiba L et al. Two metres or one: what is the evidence for physical distancing in covid-19? BMJ 2020; 370 :m3223</a></p>
</footer>

<script type="text/javascript">
            //<![CDATA[
			
	function ThreeUpdateGauge(Ambiente, Pessoas, Tempo, Emissao, min, max) {
		const TotalGaugeVal = (((document.getElementById("gaugeValue-" + Ambiente).valueAsNumber)) + ((document.getElementById("gaugeValue-" + Pessoas).valueAsNumber)*3) + ((document.getElementById("gaugeValue-" + Tempo).valueAsNumber))+ (document.getElementById("gaugeValue-" + Emissao).valueAsNumber)*2);	
		// This is the main algorithm. Right now, Pessoas is weighted 3. Emissao is weighted 2. Other two factors are weighted at 1. 
		var newGaugeDisVal = (Math.round(TotalGaugeVal/7));
		const maskinputSim = document.getElementById("Sim"); //Checks for mask input radio. If cloth masks, reduces 20%. If PFF2, 70%
		const maskinputPFF2 = document.getElementById("PFF2");
		if (maskinputSim.checked) {
			newGaugeDisVal = (Math.round(TotalGaugeVal/7)*0.80);
//			document.getElementById("testing").innerHTML = newGaugeDisVal;
		} else if(maskinputPFF2.checked) {
			newGaugeDisVal = (Math.round(TotalGaugeVal/7)*0.30);
			}
		
		const newGaugeVal = Math.floor((((newGaugeDisVal - min) / (max - min)) * 100));
		document.getElementById('riskGauge').style.setProperty('--gauge-display-value', newGaugeDisVal);
		document.getElementById('riskGauge').style.setProperty('--gauge-value', newGaugeVal); 	
	}
	
	
</script>
            
</body>
</html>
